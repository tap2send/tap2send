<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tap2Send | Login / Signup</title>
<style>
body{margin:0;font-family:sans-serif;background:#0C7A43;color:white;}
.container{max-width:400px;margin:50px auto;background:#1E3A8A;padding:30px;border-radius:15px;text-align:center;}
h1{color:#D4AF37;margin-bottom:20px;}
input{width:100%;padding:12px;margin:10px 0;border-radius:10px;border:none;}
button{width:100%;padding:12px;margin:10px 0;border-radius:10px;border:none;background:#D4AF37;color:black;font-weight:bold;cursor:pointer;}
button:hover{opacity:0.9;}
a{color:#D4AF37;display:block;margin-top:10px;text-decoration:none;}
a:hover{text-decoration:underline;}
p.status{color:#D4AF37;margin-top:10px;}
</style>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "YOUR_FIREBASE_KEY",
  authDomain: "YOUR_FIREBASE_DOMAIN",
  projectId: "YOUR_FIREBASE_PROJECT_ID",
  storageBucket: "YOUR_FIREBASE_BUCKET",
  messagingSenderId: "YOUR_FIREBASE_SENDER",
  appId: "YOUR_FIREBASE_APPID"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

function signup(){
  const email=document.getElementById('email').value;
  const password=document.getElementById('password').value;
  auth.createUserWithEmailAndPassword(email,password)
  .then(userCredential=>{
    const uid = userCredential.user.uid;
    db.collection('users').doc(uid).set({email:email,plan:'Free',msgs:150,createdAt:new Date()});
    document.querySelector('.status').innerText="Signup successful! Redirecting to Dashboard...";
    setTimeout(()=>window.location.href='dashboard.html',1500);
  })
  .catch(error=>document.querySelector('.status').innerText=error.message);
}

function login(){
  const email=document.getElementById('email').value;
  const password=document.getElementById('password').value;
  auth.signInWithEmailAndPassword(email,password)
  .then(userCredential=>{
    document.querySelector('.status').innerText="Login successful! Redirecting...";
    setTimeout(()=>window.location.href='dashboard.html',1500);
  })
  .catch(error=>document.querySelector('.status').innerText=error.message);
}

function resetPassword(){
  const email=document.getElementById('email').value;
  if(!email){alert("Enter email first!"); return;}
  auth.sendPasswordResetEmail(email)
  .then(()=>document.querySelector('.status').innerText="Reset email sent. Check your inbox!")
  .catch(error=>document.querySelector('.status').innerText=error.message);
}
</script>
</head>
<body>

<div class="container">
  <h1>Tap2Send Auth</h1>
  <input type="email" id="email" placeholder="Email" required>
  <input type="password" id="password" placeholder="Password" required>
  <button onclick="login()">Login</button>
  <button onclick="signup()">Sign Up</button>
  <a href="#" onclick="resetPassword()">Forgot Password?</a>
  <p class="status"></p>
</div>

</body>
</html>
